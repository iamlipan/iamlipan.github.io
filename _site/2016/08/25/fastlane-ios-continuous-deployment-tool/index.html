<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>

  <title>fastlane - iOS集成部署神器</title>
  <meta name="description" content="先说一个严肃的问题，我们为什么需要集成部署（Continuous Deployment）？">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://lipan.me/2016/08/25/fastlane-ios-continuous-deployment-tool/">
  <link rel="alternate" type="application/rss+xml" title="" href="http://lipan.me/feed.xml" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/"></a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

          <a class="page-link" href="/">首页</a>
          <a class="page-link" href="/about">关于</a>
          <a class="page-link" href="/links">别点我</a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">fastlane - iOS集成部署神器</h1>
    <p class="post-meta">Aug 25, 2016 • 李攀</p>
  </header>

  <article class="post-content">
    <p>先说一个严肃的问题，我们为什么需要集成部署（Continuous Deployment）？</p>

<ul>
  <li>为app提交、上传截图、发布等节省大把大把的时间（cry</li>
  <li>iOS大哥蜜月旅行去了，iOS小哥要修复线上紧急bug并发布客户端版本，怎么破？不要在发布版本这件事情上仅依赖一个人</li>
  <li>通过高频的小版本迭代来提高版本的质量</li>
</ul>

<p>然后，我们来看一下实际工作中的iOS开发、打包和发布流程：</p>

<ol>
  <li>开发前，需要登录苹果开发者后台创建App、Provisioning Profiles、certificates等；</li>
  <li>使用Xcode开发，然后将上述相关文件和证书配置好；</li>
  <li>编译项目并自测；</li>
  <li>Archive项目；</li>
  <li>上传包到iTunes后台；</li>
  <li>配置TestFlight，准备测试刚上传的版本；</li>
  <li>发布测试版本；</li>
  <li>测试发现问题，重回2；</li>
  <li>测试完成，在iTunes后台提交版本截图、描述等信息；</li>
  <li>提交App Store审核；</li>
</ol>

<p>一直以来让iOS开发者头疼的问题就是上述10步繁琐的打包和发布流程，看似10步也不多，然而懂的人知道，这其中每一步都可能有坑，都可能都要花不少时间。然后，我们<a href="http://juhuiwan.cn">团队</a>在做新项目的时候发现了一个神器，可以说是相见恨晚，这个神器就是fastlane，他几乎可以把上述流程全部自动化，而且还可以做的事情更多，想一下当初大把大把的时间都浪费在了这上面，现在终于可以解放的激动心情吧。</p>

<p>先介绍一下fastlane，<a href="https://fastlane.tools/">fastlane</a>是一个完全<a href="https://github.com/fastlane/fastlane">开源</a>的项目，现在被<a href="https://twitter.com/">Twitter</a>收购，是<a href="https://www.fabric.io">Fabric</a>的一部分，主要是提供自动化构建和发布的一系列的工具集合，他包括iOS和Android工具集，由于我们只在iOS上使用，所以这里仅介绍一下iOS相关的工具：</p>

<ul>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/deliver">deliver</a>: 上传应用截图、metadata信息和ipa包到iTunes，提交审核</li>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/snapshot">snapshot</a>: 在所有分辨率的iOS设备上截图并上传iTunes</li>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/frameit">frameit</a>: 快速地把应用截图放入设备框里</li>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/pem">pem</a>: 自动生成推送使用到的的profiles</li>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/sigh">sigh</a>: 创建、更新、下载和修复provisioning profiles，支持App Store, Ad Hoc, Development和企业profiles，而且可以自动添加测试设备UDID</li>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/produce">produce</a>: 使用命令行在iTunes和Dev后台创建iOS app</li>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/cert">cert</a>: 自动化创建和维护你的iOS签名证书</li>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/pilot">pilot</a>: 管理TestFlight的测试版本和测试设备</li>
  <li><a href="https://github.com/fastlane/boarding">boarding</a>: 自动创建一个表单来邀请参与TestFlight的用户</li>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/gym">gym</a>: 编译、打包iOS app，生成签名的ipa文件</li>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/match">match</a>: 通过git在团队中共享和同步你的证书和profiles，避免团队开发经常遇到的iOS证书不一致的蛋疼问题</li>
  <li><a href="https://github.com/fastlane/fastlane/tree/master/scan">scan</a>: 跑测试用例</li>
</ul>

<p>上述gym, sigh, match等几个工具可以说是极大提高效率的神器。</p>

<p>下图是一个简略fastlane工作流程：
<img src="https://fastlane.tools/assets/img/intro-fastlane-tree.png" alt="" /></p>

<p>总之，fastlane帮你统一定义、运行、自动化你的app发布流程，并且可以和其他第三方工具如CocoaPods等很好的结合，也可以和其他第三方持续集成(Continuous Integration)工具如Jenkins等完美的结合，不说了，从现在就开始快回去拯救你团队成员的生命吧～</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col-r  footer-col-3">
        <p class="text">别有妖妍胜桃李,攀来折去亦成蹊。<br />Written by Alan with ♡</p>
      </div>
    </div>
  </div>

</footer>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?6d29e622946fdeccd11e88bb414bddf3";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>


  </body>

</html>
